<!DOCTYPE html>
<html>

<head>
   <title>Transformaciones Cubo</title>
   <style>
      html,
      body {
         margin: 0;
         padding: 0;
         overflow: hidden;
      }
   </style>
</head>

<body>
   <script src="js/three.min.js"></script>
   <script>
      var scene, aspect, camera, renderer;
      var startTime = Date.now();

      init();
      animate();

      function init() {
         scene = new THREE.Scene();
         aspect = window.innerWidth / window.innerHeight;
         camera = new THREE.PerspectiveCamera(45, aspect, 0.1, 1000);
         renderer = new THREE.WebGLRenderer();
         renderer.setSize(window.innerWidth, window.innerHeight);
         document.body.appendChild(renderer.domElement);

         //ELEMENTOS DE LA ESCENA 
         var size = 10;
         var arrowSize = 1;
         var divisions = size;
         var origin = new THREE.Vector3(0, 0, 0);
         var x = new THREE.Vector3(1, 0, 0);
         var y = new THREE.Vector3(0, 1, 0);
         var z = new THREE.Vector3(0, 0, 1);
         var color1 = new THREE.Color(0xFFFFFF);
         var color2 = new THREE.Color(0x333333);
         var colorR = new THREE.Color(0xAA3333);
         var colorG = new THREE.Color(0x33AA33);
         var colorB = new THREE.Color(0x333366);
         var colorRd = new THREE.Color(0xAA6666);
         var colorGd = new THREE.Color(0x66AA66);
         var colorBd = new THREE.Color(0x6666AA);

         //CREAR LAS GRILLAS PARA EL ESCENARIO
         var axesHelper = new THREE.AxesHelper(size);
         var gridHelperXY = new THREE.GridHelper(size, divisions, color1, color1);
         var gridHelperXZ = new THREE.GridHelper(size, divisions, color2, color2);
         var gridHelperYZ = new THREE.GridHelper(size, divisions, color2, color2);

         //ROTARLAS PARA QUE QUEDEN EN EL ESPACIO ADECUADO
         gridHelperXY.rotateOnWorldAxis(x, THREE.Math.degToRad(90));
         gridHelperXZ.rotateOnWorldAxis(y, THREE.Math.degToRad(90));
         gridHelperYZ.rotateOnWorldAxis(z, THREE.Math.degToRad(90));

         //CREAR LAS FLECHAS QUE INDICAN LOS EJES DE COORDENADAS 3D
         var arrowX = new THREE.ArrowHelper(x, origin, arrowSize, colorR);
         var arrowY = new THREE.ArrowHelper(y, origin, arrowSize, colorG);
         var arrowZ = new THREE.ArrowHelper(z, origin, arrowSize, colorB);

         //CREAR LAS GEOMETRÍAS
         var geometry = new THREE.BoxGeometry(1, 1, 1);

         for (var i = 0; i < geometry.faces.length; i++) {
            switch (i) {
               case 0:
               case 1:
                  geometry.faces[i].color = colorRd;
                  break;
               case 2:
               case 3:
                  geometry.faces[i].color = colorRd;
                  break;
               case 4:
               case 5:
                  geometry.faces[i].color = colorGd;
                  break;
               case 6:
               case 7:
                  geometry.faces[i].color = colorGd;
                  break;
               case 8:
               case 9:
                  geometry.faces[i].color = colorBd;
                  break;
               case 10:
               case 11:
                  geometry.faces[i].color = colorBd;
                  break;
            }
         }

         //CREAR LOS MATERIALES
         var material = new THREE.MeshBasicMaterial({
            color: color1,
            vertexColors: THREE.FaceColors
         });

         //CREAR LOS OBJETOS
         object1 = new THREE.Mesh(geometry, material);
         object2 = new THREE.Mesh(geometry, material);
         object3 = new THREE.Mesh(geometry, material); //CREO EL TERCER CUBO
         var matriz1 = transTS(3 , new THREE.Vector3(1,1,1)); 
         var matriz2 = transTS(2 , new THREE.Vector3(1.5,2.75,1.5));
         var matriz3 = transTS(1 , new THREE.Vector3(3,7,3)); //LO UBICO
         object1.applyMatrix(matriz1);
         object2.applyMatrix(matriz2);
         object3.applyMatrix(matriz3);

         //AGREGAR A LA ESCENA
         scene.add(gridHelperXZ);
         scene.add(arrowX);
         scene.add(arrowY);
         scene.add(arrowZ);
         scene.add(object1);
         scene.add(object2);
         scene.add(object3);

         //MOVER LA CÁMARA
         camera.position.x = 10;
         camera.position.y = 15;
         camera.position.z = 20;
         camera.lookAt(origin);
      }


      function animate() {
         render();
         requestAnimationFrame(animate);
      }

      function render() {
         var dtime = Date.now() - startTime;
         renderer.render(scene, camera);
      }

      //CREO LA MATRIZ DE TRANSFORMACION
      function transTS(s,t){
         m = new THREE.Matrix4();
         m.set(
            s , 0   , 0   , t.x * s,
            0   , s , 0   , t.y * s,
            0   , 0   , s , t.z * s,
            0   , 0   , 0   ,         1
         )

         return m;
      }
   </script>
</body>

</html>